<!DOCTYPE html>
<html>

<head>
    <title>univlang.netlify.app</title>
    <link rel="stylesheet" href="jquery-ajax.css" />
    <script src="https://code.jquery.com/jquery-4.0.0.js"
        integrity="sha256-9fsHeVnKBvqh3FB2HYu7g2xseAZ5MlN6Kz/qnkASV8U=" crossorigin="anonymous"></script>
</head>

<body>
    <h1>univlang.netlify.app 2026.0219.0356.56</h1>
    <h2>[Development Version]</h2>

    <style>
        .example {
            font-size: 400%;
        }
    </style>

    <p>
        <button class="example" onclick="window.open('https://www.youtube.com/feed/playlists', '_blank', 'noopener')">
            再生リスト
        </button>
    </p>
    <p><button id="ajax003" class="example">Random Playlist #003</button></p>
    <p><button id="ajax005" class="example">Random Playlist #005</button></p>
    <p><button id="ajax010" class="example">Random Playlist #010</button></p>
    <p><button id="ajax050" class="example">Random Playlist #050</button></p>
    <p><button id="ajax100" class="example">Random Playlist #100</button></p>

    <div id="overlay">
        <div class="cv-spinner">
            <span class="spinner"></span>
        </div>
    </div>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        // Get a single value
        const color = urlParams.get('color');
        console.log(color); // 'purple'
        // Get all values for a parameter that appears multiple times
        const sizes = urlParams.getAll('size');
        console.log(sizes); // ['M', 'L']
        // Check if a parameter exists
        const hasColor = urlParams.has('color');
        console.log(hasColor); // true
        // Iterate over all parameters
        for (const [key, value] of urlParams.entries()) {
            console.log(`${key}: ${value}`);
        }
        $(function () {
            $(document).ajaxSend(function () {
                $("#overlay").fadeIn(300);
            });
            function callAjax(len) {
                $.ajax({
                    //crossDomain: true,
                    url: 'https://script.google.com/macros/s/AKfycbwJ2EZlK0OlyGiyffwXycXf6Na0sUTYYYD71SSPiUs/dev',
                    type: 'GET',
                    dataType: 'jsonp', // クロスドメイン制限を避けるため
                    data: { 'length': len }
                })
                    .done((data) => {
                        window.open(data.url, '_blank', 'noopener');
                    })
                    .fail((jqXHR, textStatus, errorThrown) => {
                        alert('Ajax通信に失敗しました。');
                        console.log("jqXHR          : " + jqXHR.status); // HTTPステータスを表示
                        console.log("textStatus     : " + textStatus);    // タイムアウト、パースエラーなどのエラー情報を表示
                        console.log("errorThrown    : " + errorThrown.message); // 例外情報を表示
                    })
                    .always((data) => {
                        setTimeout(function () { $("#overlay").fadeOut(300); }, 500);
                    });
            };
            $('#ajax003').on('click', function () {
                callAjax(3);
            });
            $('#ajax005').on('click', function () {
                callAjax(5);
            });
            $('#ajax010').on('click', function () {
                callAjax(10);
            });
            $('#ajax050').on('click', function () {
                callAjax(50);
            });
            $('#ajax100').on('click', function () {
                callAjax(100);
            });
        });
    </script>
</body>

</html>